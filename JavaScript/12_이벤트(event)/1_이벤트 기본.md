# 자바스크립트 이벤트

## 1. 이벤트(event)란?

- 이벤트는 어떤 사건을 의미한다.
- 브라우저에서의 이벤트란?
  - 사용자가 버튼을 클릭했을 때 웹페이지가 로드 되었을 때와 같은 것인데 이것은 DOM 요소와 관련이 있다.
    - DOM(document Object Model) 문서 객체 모델
      - HTML 요소들의 구조화된 표현
      - HTML 문서의 객체 기반 표현 방식이다.
      - 단순 텍스트로 구성된 HTML 문서의 내용과 구조가 객체 모델로 변환되어 다양한 프로그램에서 사용될 수 있다.
  - 브라우저 뷰 포트에 보이는 것은 렌더 트리로 DOM과 CSSOM의 조합이다.
    - 렌더 트리는 오직 스크린에 그려지는 것으로 구성되어 있다.
- 이벤트가 발생하는 시점이나 순서를 사전에 인지할 수 없다.
  - 일반적인 제어 흐름과는 다른 접근방식이 필요하다.
  - 이벤트가 발생하면 누군가 이를 감지할 수 있어야 하며 그에 대응하는 처리를 호출해 주어야 한다.
- 브라우저는 이벤트를 감지할 수 있으며 이벤트 발생시에는 통지해 준다. 이 과정을 통해 사용자와 웹페이지는 상호작용이 가능하다.
- 이벤트가 발생하면 그에 맞는 반응을 해야한다.
  - 이벤트는 일반적으로 함수에 연결되며 그 함수는 이벤트가 발생하기 전에는 실행되지 않다가 이벤트가 발생되면 실행된다. 이 함수를 **이벤트 핸들러**라 하며 이벤트에 대응하는 처리를 기술한다.

## 2. 이벤트 루프(Event Loop)와 동시성(Concurrency)

- 브라우저는 단일 쓰레드(single-thread)에서 이벤트 드리븐(event-driven) 방식으로 동작한다.
- 단일 쓰레드는 하나의 작업만을 처리할 수 있다.
  - 실제로 동작하는 웹 애플리케이션은 많은 작업이 동시에 처리되는 것처럼 느껴진다.
- 자바스크립트의 동시성을 지원하는 것이 바로 **이벤트 루프**이다.

### Call Stack (호출 스택)

작업이 요청되면 요청된 작업은 순차적으로 Call stack에 쌓이게 되고 순차적으로 실행된다. 자바스크립트는 단 하나의 Call stack을 사용하기 때문에 해당 작업이 종료하기 전까지는 다른 작업을 수행될 수 없다.

### Heap

동적으로 생성된 객체 인스턴스가 할당되는 영역이다.

동시성을 지원하기 위해 필요한 비동기 요청 처리는 자바스크립트 엔진을 구동하는 환경 브라우저(또는 Node.js)가 담당한다.

### Event Queue(Task Queue)

비동기 처리 함수의 콜백 함수, 비동기식 이벤트 핸들러, Timer 함수(setTimeout(), setInterval())의 콜백 함수가 보관되는 영역으로 **이벤트 루프(Event Loop)에 의해 특정 시점(Call Stack이 비어졌을 때)에 순차적으로 Call Stack으로 이동되어 실행**된다.

### Event Loop(이벤트 루프)

Call Stack 내에서 현재 실행중인 작업이 있는지 그리고 Event Queue에 작업이 있는지 반복하여 확인한다. 만약 Call Stack이 비어있다면 Event Queue 내의 t작업이 Call Stack으로 이동하고 실행된다.
